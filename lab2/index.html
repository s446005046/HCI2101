<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù„Ø¹Ø¨Ø© XO | Ù…Ø¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#0f1b33;
      --card:#121c33cc;
      --card2:#0f172acc;
      --text:#eaf2ff;
      --muted:#b8c6e6;
      --primary:#7c3aed;
      --primary2:#22c55e;
      --danger:#ef4444;
      --warn:#f59e0b;
      --line:rgba(255,255,255,.10);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 20% 10%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 550px at 80% 20%, rgba(34,197,94,.25), transparent 55%),
        radial-gradient(900px 700px at 50% 90%, rgba(245,158,11,.20), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    .wrap{
      width:min(980px, 92vw);
      margin:24px auto 92px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .logo{
      width:46px;height:46px;border-radius:16px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), transparent 45%),
        linear-gradient(135deg, var(--primary), #06b6d4);
      box-shadow: 0 14px 35px rgba(124,58,237,.25);
      position:relative;
    }
    .logo:before, .logo:after{
      content:"";
      position:absolute;
      inset:11px;
      border:2px solid rgba(255,255,255,.28);
      border-radius:12px;
      transform: rotate(12deg);
    }
    .logo:after{
      inset:15px;
      border-color: rgba(255,255,255,.18);
      transform: rotate(-10deg);
    }
    .title h1{
      font-size:18px;
      margin:0;
      letter-spacing:.2px;
    }
    .title p{
      margin:2px 0 0;
      color:var(--muted);
      font-size:12.5px;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      color:var(--muted);
      font-size:12.5px;
      backdrop-filter: blur(10px);
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--primary2);
      box-shadow: 0 0 0 4px rgba(34,197,94,.18);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
    }
    @media (max-width: 860px){
      .grid{grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 180px at 20% 0%, rgba(124,58,237,.22), transparent 60%),
                  radial-gradient(540px 220px at 80% 20%, rgba(34,197,94,.18), transparent 62%);
      pointer-events:none;
    }
    .card > *{ position:relative; }

    .section{
      padding:16px;
    }

    .start{
      display:block;
    }
    .start h2{
      margin:0 0 8px;
      font-size:16.5px;
    }
    .start p{
      margin:0 0 14px;
      color:var(--muted);
      font-size:13px;
      line-height:1.7;
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 520px){
      .row{grid-template-columns:1fr;}
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .field label{
      color:var(--muted);
      font-size:12.5px;
    }
    input[type="text"]{
      border:1px solid var(--line);
      background: rgba(15,23,42,.65);
      color:var(--text);
      padding:12px 12px;
      border-radius: 14px;
      outline:none;
      transition: .2s ease;
    }
    input[type="text"]:focus{
      border-color: rgba(124,58,237,.6);
      box-shadow: 0 0 0 4px rgba(124,58,237,.18);
    }

    .modes{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:14px 0 10px;
    }
    .mode{
      flex:1;
      min-width: 190px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      padding:12px 12px;
      border-radius: 16px;
      cursor:pointer;
      transition:.2s ease;
      user-select:none;
    }
    .mode:hover{ transform: translateY(-1px); background: rgba(255,255,255,.07); }
    .mode.active{
      border-color: rgba(34,197,94,.55);
      box-shadow: 0 0 0 4px rgba(34,197,94,.15);
      background: rgba(34,197,94,.08);
    }
    .mode b{display:block; font-size:13.5px; margin-bottom:4px;}
    .mode span{color:var(--muted); font-size:12.5px; line-height:1.6;}

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius: 16px;
      font-weight:700;
      color:var(--text);
      transition:.2s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      min-width: 160px;
    }
    .btn.primary{
      background: linear-gradient(135deg, var(--primary), #06b6d4);
      box-shadow: 0 14px 35px rgba(124,58,237,.20);
    }
    .btn.primary:hover{ transform: translateY(-1px); }
    .btn.ghost{
      background: rgba(255,255,255,.06);
      border: 1px solid var(--line);
      color:var(--muted);
    }
    .btn.ghost:hover{
      background: rgba(255,255,255,.08);
      color:var(--text);
    }
    .btn.danger{
      background: rgba(239,68,68,.12);
      border:1px solid rgba(239,68,68,.35);
    }

    /* Game area */
    .gameHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding:16px 16px 8px;
      border-bottom: 1px solid var(--line);
      background: rgba(0,0,0,.10);
    }
    .status{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .status .who{
      font-size:14px;
      font-weight:800;
    }
    .status .sub{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.6;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      color:var(--muted);
      font-size:12.5px;
      white-space:nowrap;
    }
    .pill strong{ color:var(--text); }
    .gameBody{
      padding:16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    .board{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      width:min(420px, 100%);
      margin: 0 auto;
    }
    .cell{
      aspect-ratio: 1 / 1;
      border-radius: 22px;
      border: 1px solid var(--line);
      background: rgba(15,23,42,.55);
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:42px;
      font-weight:900;
      cursor:pointer;
      transition:.18s ease;
      position:relative;
      overflow:hidden;
      user-select:none;
    }
    .cell:hover{
      transform: translateY(-2px);
      background: rgba(255,255,255,.07);
    }
    .cell.disabled{
      cursor:not-allowed;
      opacity:.88;
    }
    .markX{ color:#60a5fa; text-shadow: 0 12px 30px rgba(96,165,250,.18); }
    .markO{ color:#34d399; text-shadow: 0 12px 30px rgba(52,211,153,.18); }

    .panel{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      padding:14px;
      border-radius: 18px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
    }
    .score{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){
      .score{grid-template-columns:1fr;}
    }
    .scoreBox{
      border:1px solid var(--line);
      background: rgba(0,0,0,.10);
      border-radius: 16px;
      padding:12px;
    }
    .scoreBox .k{ color:var(--muted); font-size:12.5px; margin-bottom:6px;}
    .scoreBox .v{ font-size:18px; font-weight:900; }

    .hint{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.7;
      text-align:center;
      margin-top:2px;
    }

    /* Right card */
    .tips h3{
      margin:0 0 8px;
      font-size:15.5px;
    }
    .tips ul{
      margin:0;
      padding:0 18px 0 0;
      color:var(--muted);
      line-height:1.9;
      font-size:13px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color:var(--muted);
      font-size:12.5px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
      padding:2px 7px;
      border-radius:8px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.12);
      color:var(--text);
    }

    /* Screens */
    .screen{ display:none; }
    .screen.active{ display:block; }

    /* Modal-ish toast */
    .toast{
      position: fixed;
      top: 16px;
      left: 50%;
      transform: translateX(-50%);
      width: min(560px, 92vw);
      background: rgba(15,23,42,.80);
      border:1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow);
      padding: 12px 14px;
      backdrop-filter: blur(10px);
      display:none;
      z-index: 50;
    }
    .toast.show{ display:block; animation: pop .22s ease; }
    @keyframes pop{
      from{ transform: translateX(-50%) translateY(-6px); opacity:.0; }
      to{ transform: translateX(-50%) translateY(0); opacity:1; }
    }
    .toast b{ display:block; margin-bottom:3px;}
    .toast span{ color:var(--muted); font-size:12.5px; line-height:1.6;}

    /* Footer (mandatory) */
    footer{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      z-index:40;
      border-top:1px solid var(--line);
      background: rgba(10,15,26,.78);
      backdrop-filter: blur(10px);
    }
    .footerInner{
      width:min(980px, 92vw);
      margin: 0 auto;
      padding: 10px 0;
      display:flex;
      flex-wrap:wrap;
      gap:10px 16px;
      align-items:center;
      justify-content:space-between;
      color:var(--muted);
      font-size:12.5px;
    }
    .footerInner strong{ color:var(--text); }
    .footerGroup{
      display:flex;
      flex-wrap:wrap;
      gap:10px 16px;
      align-items:center;
    }

    .tiny{
      font-size:12px;
      color:var(--muted);
    }
  </style>
</head>

<body>
  <div class="toast" id="toast">
    <b id="toastTitle">ØªÙ†Ø¨ÙŠÙ‡</b>
    <span id="toastMsg">...</span>
  </div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <h1>Ù„Ø¹Ø¨Ø© XO (ØªÙŠÙƒ ØªØ§Ùƒ ØªÙˆ) â€” Ø·ÙˆØ± ÙØ±Ø¯ÙŠ ÙˆØ·ÙˆØ± Ù„Ø§Ø¹Ø¨ÙŠÙ†</h1>
          <p>ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© â€¢ ØªØµÙ…ÙŠÙ… Ø­Ø¯ÙŠØ« â€¢ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø³ÙŠØ· Ù„Ù„Ø·ÙˆØ± Ø§Ù„ÙØ±Ø¯ÙŠ</p>
        </div>
      </div>
      <div class="chip">
        <span class="dot"></span>
        <span>Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡</span>
      </div>
    </div>

    <div class="grid">
      <!-- Left: main -->
      <div class="card">
        <!-- Start Screen -->
        <div class="screen start active" id="screenStart">
          <div class="section">
            <h2>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</h2>
            <p>
              Ø§Ø®ØªØ§Ø±ÙŠ Ø·ÙˆØ± Ø§Ù„Ù„Ø¹Ø¨ Ø«Ù… Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡. ÙÙŠ Ø·ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ÙˆØ§Ø­Ø¯ Ø³ØªÙ„Ø¹Ø¨ÙŠÙ† Ø¶Ø¯ â€œØ§Ù„Ø°ÙƒØ§Ø¡â€.
              ÙÙŠ Ø·ÙˆØ± Ù„Ø§Ø¹Ø¨ÙŠÙ† ØªÙ„Ø¹Ø¨ÙˆÙ† Ø¨Ø§Ù„ØªÙ†Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø².
            </p>

            <div class="modes" role="tablist" aria-label="Ø£Ø·ÙˆØ§Ø± Ø§Ù„Ù„Ø¹Ø¨">
              <div class="mode active" id="modeSingle" role="tab" tabindex="0" aria-selected="true">
                <b>Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ (Ø¶Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡)</b>
                <span>ØªØ­Ø¯Ù‘ÙŠ Ø³Ø±ÙŠØ¹ Ù…Ø¹ Ø­Ø±ÙƒØ© Ø°ÙƒÙŠØ© Ø¨Ø³ÙŠØ·Ø©</span>
              </div>
              <div class="mode" id="modeTwo" role="tab" tabindex="0" aria-selected="false">
                <b>Ù„Ø§Ø¹Ø¨ÙŠÙ† (Ù…Ø­Ù„ÙŠ)</b>
                <span>Ø§Ø¯Ø®Ù„ÙŠ Ø§Ø³Ù…ÙŠÙ† ÙˆØ§Ù„Ø¹Ø¨ÙˆØ§ Ø³ÙˆØ§ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø´Ø§Ø´Ø©</span>
              </div>
            </div>

            <div class="row">
              <div class="field">
                <label for="p1">Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„</label>
                <input id="p1" type="text" maxlength="18" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³ÙŠØ¯" />
              </div>
              <div class="field" id="p2Field" style="display:none;">
                <label for="p2">Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ</label>
                <input id="p2" type="text" maxlength="18" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù…Ø±" />
              </div>
            </div>

            <div class="actions">
              <button class="btn primary" id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
              <button class="btn ghost" id="demoBtn" title="ØªØ¹Ø¨Ø¦Ø© Ø£Ø³Ù…Ø§Ø¡ ØªØ¬Ø±ÙŠØ¨ÙŠØ©">ØªØ¬Ø±Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©</button>
            </div>

            <div class="tiny" style="margin-top:12px;">
              Ù…Ù„Ø§Ø­Ø¸Ø©: ÙÙŠ ÙƒÙ„ Ø¬ÙˆÙ„Ø© Ø³ÙŠØªÙ… ØªØ¨Ø¯ÙŠÙ„ Ù…Ù† ÙŠØ¨Ø¯Ø£ (X Ø£Ùˆ O) ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ø¥Ø¶Ø§ÙØ© Ø­Ù…Ø§Ø³.
            </div>
          </div>
        </div>

        <!-- Game Screen -->
        <div class="screen" id="screenGame">
          <div class="gameHeader">
            <div class="status">
              <div class="who" id="turnText">Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: â€”</div>
              <div class="sub" id="modeText">â€”</div>
            </div>
            <div class="pill" id="roundPill">
              Ø§Ù„Ø¬ÙˆÙ„Ø©: <strong id="roundNum">1</strong>
            </div>
          </div>

          <div class="gameBody">
            <div class="board" id="board" aria-label="Ù„ÙˆØ­Ø© XO">
              <div class="cell" data-i="0" aria-label="Ø®Ø§Ù†Ø© 1"></div>
              <div class="cell" data-i="1" aria-label="Ø®Ø§Ù†Ø© 2"></div>
              <div class="cell" data-i="2" aria-label="Ø®Ø§Ù†Ø© 3"></div>
              <div class="cell" data-i="3" aria-label="Ø®Ø§Ù†Ø© 4"></div>
              <div class="cell" data-i="4" aria-label="Ø®Ø§Ù†Ø© 5"></div>
              <div class="cell" data-i="5" aria-label="Ø®Ø§Ù†Ø© 6"></div>
              <div class="cell" data-i="6" aria-label="Ø®Ø§Ù†Ø© 7"></div>
              <div class="cell" data-i="7" aria-label="Ø®Ø§Ù†Ø© 8"></div>
              <div class="cell" data-i="8" aria-label="Ø®Ø§Ù†Ø© 9"></div>
            </div>

            <div class="panel">
              <div class="score" aria-label="Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬">
                <div class="scoreBox">
                  <div class="k" id="p1Label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1 (X)</div>
                  <div class="v" id="p1Score">0</div>
                </div>
                <div class="scoreBox">
                  <div class="k">ØªØ¹Ø§Ø¯Ù„</div>
                  <div class="v" id="drawScore">0</div>
                </div>
                <div class="scoreBox">
                  <div class="k" id="p2Label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 2 (O)</div>
                  <div class="v" id="p2Score">0</div>
                </div>
              </div>

              <div class="actions" style="justify-content:center;">
                <button class="btn ghost" id="newRoundBtn">Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                <button class="btn danger" id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ÙƒÙ„</button>
                <button class="btn ghost" id="backBtn">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©</button>
              </div>

              <div class="hint" id="hint">
                Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ø®Ø§Ù†Ø© ÙØ§Ø¶ÙŠØ© Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø©. Ø§Ù„ÙÙˆØ² ÙŠÙƒÙˆÙ† Ø¨Ø«Ù„Ø§Ø«Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: tips/info -->
      <div class="card">
        <div class="section tips">
          <h3>ÙƒÙŠÙ ØªØ±Ø¨Ø­ÙŠÙ† Ø¨Ø³Ø±Ø¹Ø©ØŸ</h3>
          <ul>
            <li>Ø­Ø§ÙˆÙ„ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ <b>Ø§Ù„Ù…Ù†ØªØµÙ</b> Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­Ù‹Ø§.</li>
            <li>Ø±Ø§Ù‚Ø¨ÙŠ Ø®Ø·ÙˆØ· Ø§Ù„ÙÙˆØ²: Ø§Ù„ØµÙÙˆÙ ÙˆØ§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙˆØ§Ù„Ù‚Ø·Ø±ÙŠÙ‘Ø§Øª.</li>
            <li>Ø¥Ø°Ø§ Ù‚Ø¯Ø±ØªÙ ØªØ¹Ù…Ù„ÙŠ â€œÙØ±Ø¹ÙŠÙ† Ù„Ù„ÙÙˆØ²â€ (ØªÙ‡Ø¯ÙŠØ¯ÙŠÙ†) ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚ØªØŒ ÙØ±ØµØªÙƒ ÙƒØ¨ÙŠØ±Ø©.</li>
          </ul>

          <div style="height:12px"></div>

          <div class="badge">
            Ø§Ø®ØªØµØ§Ø±: <span class="kbd">Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</span> ÙŠØ¹ÙŠØ¯ Ø§Ù„Ù„ÙˆØ­Ø© ÙÙ‚Ø·
          </div>
          <div style="height:10px"></div>
          <div class="badge">
            <span class="kbd">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</span> ÙŠÙ…Ø³Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙØ±
          </div>

          <div style="height:14px"></div>
          <div class="tiny">
            âœ… Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ù„Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·. <br/>
            âœ… ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ© + Ù…ØªØ¬Ø§ÙˆØ¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„. <br/>
            âœ… Ø·ÙˆØ± ÙØ±Ø¯ÙŠ Ø¶Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ·ÙˆØ± Ù„Ø§Ø¹Ø¨ÙŠÙ†.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mandatory Footer -->
  <footer>
    <div class="footerInner">
      <div class="footerGroup">
        <span>Student Name: <strong>OSAID OMAR IBRAHIM ALMARBAE (Ø£Ø³ÙŠØ¯ Ø¹Ù…Ø± Ø¨Ù† Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„Ù…Ø±Ø¨Ø¹Ù‰)</strong></span>
        <span>Student ID: <strong>446005046</strong></span>
      </div>
      <div class="footerGroup">
        <span>Supervised by: <strong>Mohammed Ahmed Jabali</strong></span>
      </div>
    </div>
  </footer>

  <script>
    // ===== Utilities =====
    const $ = (id) => document.getElementById(id);

    function showToast(title, msg){
      $("toastTitle").textContent = title;
      $("toastMsg").textContent = msg;
      const t = $("toast");
      t.classList.add("show");
      clearTimeout(showToast._timer);
      showToast._timer = setTimeout(()=> t.classList.remove("show"), 2600);
    }

    function sanitizeName(s){
      s = (s || "").trim();
      if(!s) return "";
      // remove excessive spaces
      s = s.replace(/\s+/g, " ");
      // limit
      if(s.length > 18) s = s.slice(0,18);
      return s;
    }

    // ===== Game State =====
    let mode = "single"; // single | two
    let players = { X: "Ø§Ù„Ù„Ø§Ø¹Ø¨ 1", O: "Ø§Ù„Ø°ÙƒØ§Ø¡" };
    let scores = { X: 0, O: 0, D: 0 };
    let board = Array(9).fill("");
    let current = "X";
    let round = 1;
    let locked = false; // prevent clicks while AI thinking
    let starterFlip = false; // to alternate starter

    const wins = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    // ===== DOM =====
    const screenStart = $("screenStart");
    const screenGame = $("screenGame");

    const modeSingle = $("modeSingle");
    const modeTwo = $("modeTwo");
    const p2Field = $("p2Field");

    const startBtn = $("startBtn");
    const demoBtn = $("demoBtn");

    const backBtn = $("backBtn");
    const newRoundBtn = $("newRoundBtn");
    const resetBtn = $("resetBtn");

    const turnText = $("turnText");
    const modeText = $("modeText");
    const roundNum = $("roundNum");
    const hint = $("hint");

    const p1Label = $("p1Label");
    const p2Label = $("p2Label");
    const p1Score = $("p1Score");
    const p2Score = $("p2Score");
    const drawScore = $("drawScore");

    const cells = Array.from(document.querySelectorAll(".cell"));

    // ===== Mode select =====
    function setMode(newMode){
      mode = newMode;
      if(mode === "single"){
        modeSingle.classList.add("active");
        modeTwo.classList.remove("active");
        modeSingle.setAttribute("aria-selected","true");
        modeTwo.setAttribute("aria-selected","false");
        p2Field.style.display = "none";
      }else{
        modeTwo.classList.add("active");
        modeSingle.classList.remove("active");
        modeTwo.setAttribute("aria-selected","true");
        modeSingle.setAttribute("aria-selected","false");
        p2Field.style.display = "flex";
      }
    }

    modeSingle.addEventListener("click", ()=> setMode("single"));
    modeTwo.addEventListener("click", ()=> setMode("two"));
    modeSingle.addEventListener("keydown", (e)=> { if(e.key==="Enter") setMode("single"); });
    modeTwo.addEventListener("keydown", (e)=> { if(e.key==="Enter") setMode("two"); });

    // ===== Start =====
    demoBtn.addEventListener("click", ()=>{
      $("p1").value = "Ø£Ø³ÙŠØ¯";
      $("p2").value = "Ø¹Ù…Ø±";
      showToast("ØªÙ…Øª Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©", "ØªÙ‚Ø¯Ø±/ÙŠÙ† ØªØ¹Ø¯Ù„ÙŠÙ† Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø«Ù… ØªØ¶ØºØ·ÙŠÙ† Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨.");
    });

    startBtn.addEventListener("click", ()=>{
      const n1 = sanitizeName($("p1").value) || "Ø§Ù„Ù„Ø§Ø¹Ø¨ 1";
      const n2 = sanitizeName($("p2").value);

      if(mode === "two"){
        if(!n2){
          showToast("Ù†Ø§Ù‚Øµ Ø§Ø³Ù…", "Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø£Ùˆ Ø§Ø®ØªØ§Ø±ÙŠ Ø·ÙˆØ± Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯.");
          return;
        }
        if(n1 === n2){
          showToast("ØªØ´Ø§Ø¨Ù‡ Ø£Ø³Ù…Ø§Ø¡", "ÙŠÙØ¶Ù„ ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ (Ù…Ø«Ù„Ø§Ù‹: Ø£Ø³ÙŠØ¯ 1 Ùˆ Ø£Ø³ÙŠØ¯ 2).");
          return;
        }
        players = { X: n1, O: n2 };
      }else{
        players = { X: n1, O: "Ø§Ù„Ø°ÙƒØ§Ø¡" };
      }

      // reset state for a fresh session
      scores = { X: 0, O: 0, D: 0 };
      round = 1;
      starterFlip = false;
      beginGame();
    });

    function beginGame(){
      switchScreen("game");
      updateScoreUI();
      startNewRound(true);
    }

    function switchScreen(which){
      if(which === "start"){
        screenStart.classList.add("active");
        screenGame.classList.remove("active");
      }else{
        screenStart.classList.remove("active");
        screenGame.classList.add("active");
      }
    }

    // ===== Round / Reset =====
    backBtn.addEventListener("click", ()=>{
      switchScreen("start");
      showToast("Ø±Ø¬Ø¹Ù†Ø§ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©", "Ø§Ø®ØªØ§Ø±ÙŠ Ø·ÙˆØ± Ø¬Ø¯ÙŠØ¯ Ø£Ùˆ Ø¹Ø¯Ù‘Ù„ÙŠ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡.");
    });

    newRoundBtn.addEventListener("click", ()=> startNewRound(false));

    resetBtn.addEventListener("click", ()=>{
      scores = { X: 0, O: 0, D: 0 };
      round = 1;
      starterFlip = false;
      updateScoreUI();
      startNewRound(true);
      showToast("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·", "ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.");
    });

    function startNewRound(isFirst){
      board = Array(9).fill("");
      locked = false;

      // alternate starter each round (X then O then X...)
      if(isFirst){
        current = "X";
      }else{
        starterFlip = !starterFlip;
        current = starterFlip ? "O" : "X";
        round++;
      }

      roundNum.textContent = String(round);
      renderBoard();
      updateHeader();

      // If single mode and AI starts
      if(mode === "single" && current === "O"){
        aiMoveSoon();
      }
    }

    // ===== Board Interaction =====
    cells.forEach(cell=>{
      cell.addEventListener("click", ()=>{
        if(locked) return;
        const i = Number(cell.dataset.i);
        if(board[i]) return;

        // in single mode, human is X only
        if(mode === "single" && current === "O") return;

        placeMark(i, current);
        const result = evaluate();
        if(result.ended) return;

        toggleTurn();
        updateHeader();

        if(mode === "single" && current === "O"){
          aiMoveSoon();
        }
      });
    });

    function placeMark(i, mark){
      board[i] = mark;
      renderBoard();
    }

    function renderBoard(){
      cells.forEach((c, idx)=>{
        const v = board[idx];
        c.textContent = v ? v : "";
        c.classList.toggle("disabled", !!v || locked);
        c.classList.remove("markX","markO");
        if(v === "X") c.classList.add("markX");
        if(v === "O") c.classList.add("markO");
      });
    }

    function toggleTurn(){
      current = current === "X" ? "O" : "X";
    }

    // ===== Game Logic =====
    function getWinner(b){
      for(const [a,b1,c] of wins){
        if(b[a] && b[a] === b[b1] && b[a] === b[c]) return b[a];
      }
      return null;
    }

    function isFull(b){
      return b.every(x => x);
    }

    function evaluate(){
      const w = getWinner(board);
      if(w){
        scores[w] += 1;
        updateScoreUI();
        locked = true;
        renderBoard();
        hint.textContent = `ğŸ‰ ÙØ§Ø² ${players[w]}! Ø§Ø¶ØºØ·ÙŠ "Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©" Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.`;
        showToast("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©", `Ø§Ù„ÙØ§Ø¦Ø²: ${players[w]}`);
        return { ended:true, winner:w };
      }
      if(isFull(board)){
        scores.D += 1;
        updateScoreUI();
        locked = true;
        renderBoard();
        hint.textContent = "ğŸ¤ ØªØ¹Ø§Ø¯Ù„! Ø§Ø¶ØºØ·ÙŠ \"Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©\" Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰.";
        showToast("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©", "ØªØ¹Ø§Ø¯Ù„!");
        return { ended:true, winner:null };
      }
      hint.textContent = "Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ø®Ø§Ù†Ø© ÙØ§Ø¶ÙŠØ© Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø©. Ø§Ù„ÙÙˆØ² ÙŠÙƒÙˆÙ† Ø¨Ø«Ù„Ø§Ø«Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ù„ÙŠ.";
      return { ended:false };
    }

    function updateHeader(){
      const who = players[current] || "â€”";
      turnText.textContent = `Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: ${who} (${current})`;
      if(mode === "single"){
        modeText.textContent = `Ø§Ù„Ø·ÙˆØ±: Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ â€” ${players.X} Ø¶Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡`;
      }else{
        modeText.textContent = `Ø§Ù„Ø·ÙˆØ±: Ù„Ø§Ø¹Ø¨ÙŠÙ† â€” ${players.X} Ø¶Ø¯ ${players.O}`;
      }
    }

    function updateScoreUI(){
      p1Label.textContent = `${players.X} (X)`;
      p2Label.textContent = `${players.O} (O)`;
      p1Score.textContent = String(scores.X);
      p2Score.textContent = String(scores.O);
      drawScore.textContent = String(scores.D);
    }

    // ===== AI (simple smart) =====
    function aiMoveSoon(){
      locked = true;
      renderBoard();
      turnText.textContent = `Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø¢Ù†: Ø§Ù„Ø°ÙƒØ§Ø¡ (O) ...`;
      modeText.textContent = "ÙŠÙÙƒØ± Ø§Ù„Ø¢Ù† ğŸ¤–";
      setTimeout(()=>{
        const move = chooseAiMove();
        locked = false;
        placeMark(move, "O");
        const result = evaluate();
        if(result.ended) return;
        toggleTurn();
        updateHeader();
      }, 420);
    }

    // Strategy:
    // 1) Win if possible
    // 2) Block opponent win
    // 3) Take center
    // 4) Take a corner
    // 5) Take any side
    function chooseAiMove(){
      const empty = board.map((v,i)=> v? null : i).filter(i=> i !== null);

      // 1) try win
      for(const i of empty){
        const b = board.slice();
        b[i] = "O";
        if(getWinner(b) === "O") return i;
      }
      // 2) block X
      for(const i of empty){
        const b = board.slice();
        b[i] = "X";
        if(getWinner(b) === "X") return i;
      }
      // 3) center
      if(!board[4]) return 4;

      // 4) corners
      const corners = [0,2,6,8].filter(i => !board[i]);
      if(corners.length) return corners[Math.floor(Math.random()*corners.length)];

      // 5) sides
      const sides = [1,3,5,7].filter(i => !board[i]);
      return sides.length ? sides[Math.floor(Math.random()*sides.length)] : empty[0];
    }
  </script>
</body>
</html>
